<?xml version="1.0" encoding="UTF-8"?>
<screen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/xml-screen-2.1.xsd" menu-image="glyphicon glyphicon-shopping-cart" menu-image-type="icon" default-menu-title="Find DTE Cargado">

    <transition name="loadDte">
        <service-call name="mchile.DTEServices.load#DteFromFile"/>
        <default-response url="."/>
    </transition>

    <actions>
        <entity-find entity-name="mantle.account.invoice.Invoice" list="loadedDteList">
            <search-form-inputs/>
            <econdition field-name="invoiceTypeEnumId" value="InvoiceFiscalTaxDocumentReception"/>
        </entity-find>
    </actions>

    <widgets>
        <container-dialog id="LoadDte" button-text="Load Dte from XML">
            <widgets>
                <form-single name="LoadDte" transition="loadDte">
                    <field name="xmlFile"><default-field><file/></default-field></field>
                    <field name="pdfFile"><default-field><file accept="*.pdf"/></default-field></field>
                    <field name="submit"><default-field><submit/></default-field></field>
                </form-single>
            </widgets>
        </container-dialog>

        <form-list name="ReceivedDteForm" list="loadedDteList" header-dialog="true">
            <field name="invoiceId"></field>
            <field name="invoiceDate">
                <header-field><date-find/></header-field>
                <default-field><display format="dd/MM/yyyy"/></default-field></field>
            <field name="dueDate">
                <header-field><date-find/></header-field>
                <default-field><display format="dd/MM/yyyy"/></default-field></field>
            <field name="fromPartyId"><default-field>
                <display-entity entity-name="mantle.party.PartyDetail" text="PartyNameOnlyTemplate"/>
            </default-field></field>
            <field name="toPartyId"><default-field>
                <display-entity entity-name="mantle.party.PartyDetail" text="PartyNameOnlyTemplate"/>
            </default-field></field>
            <field name="invoiceTotal">
                <default-field><display/></default-field>
            </field>
        </form-list>
    </widgets>
</screen>